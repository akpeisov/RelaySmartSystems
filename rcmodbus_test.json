{"type": "HELLO",
"payload": {
    "type": "WEB1",
    "token": "N12345678"
}
}

// при сохранении мастера нужно взять ио со слейвов, остальные, если есть, удалить


{"type": "DEVICECONFIG",
    "payload": {
        "name": "master",
        "model": "RCV2B",
        "mac": "N12345678",
        "description": "test",
        "mqtt": {
            "enabled": false,
            "url": "qwerty",
            "topics": [
                {
                    "topic": "dev1/inputs/0/3",
                    "events": [
                        {                        
                            "event": "on",
                            "type": "output",
                            "output": 0,
                            "action": "on",
                            "slaveId": 5
                        },
                        {                        
                            "event": "toggle",
                            "type": "in",
                            "input": 2,
                            "action": "toggle"
                        }
                    ]
                }
            ]
        },
        "modbus": {
            "mode": "master",
            "pollingTime": 100,
            "readTimeout": 500,
            "maxRetries": 3,
            "actionOnSameSlave": false,
            "slaves": [
                {
                    "slaveId": 1,
                    "model": "RCV2B",
                    "mac": "9876543210"
                },
                {
                    "slaveId": 2,
                    "model": "RCV2S",
                    "mac": "N222333"
                }
            ]
        },
        "scheduler": {
            "enabled": true,
            "tasks": [
                {
                    "name": "task1",
                    "grace": 15,
                    "time": 1000,
                    "enabled": true,
                    "dow": [1,2,5],
                    "actions": [
                        {
                            "action": "on",
                            "type": "out",
                            "output": 2
                        }
                    ]
                }
            ]
        }, 
        "network": {
            "ntpServer": "pool.ntp.org",
            "ntpTZ": "UTC-5:00",
            "otaURL": "https://example.com/RelayController.bin",
            "cloud": {
              "address": "ws://example.com/ws",
              "enabled": true
            },
            "eth": {
              "enabled": true,
              "dhcp": true,
              "ip": "192.168.2.9",
              "netmask": "255.255.255.0",
              "gateway": "192.168.2.1",
              "dns": "192.168.2.1",
              "enableReset": true,
              "resetGPIO": 5
            },
            "wifi": {
              "enabled": true,
              "dhcp": true,
              "ip": "192.168.2.10",
              "netmask": "255.255.255.0",
              "gateway": "192.168.2.1",
              "ssid": "devices",
              "pass": "123"
            },
            "ftp": {
              "enabled": false,
              "user": "admin",
              "pass": "admin"
            }        
        },
        "io": {
            "outputs": [
                {
                    "id": 1,
                    "name": "out1",
                    "state": "on"
                },
                {
                    "id": 2,
                    "name": "out1",
                    "state": "on",
                    "slaveId": 1
                },
                {
                    "id": 2,
                    "name": "out1",
                    "state": "on",
                    "type": "INVSW"
                }
            ],
            "inputs": [
                {
                    "id": 1,
                    "name": "in1",
                    "state": "on",
                    "slaveId": 2,
                    "events": [
                        {
                            "event": "toggle",
                            "actions": [
                                {
                                    "output": 1,
                                    "action": "toggle"
                                }
                            ]
                        }
                    ]
                },
                {
                    "id": 2,
                    "name": "in2",
                    "state": "off",
                    "events": [
                        {
                            "event": "on",
                            "actions": [
                                {
                                    "output": 1,
                                    "action": "off",
                                    "slaveId": 2
                                }
                            ]
                        }
                    ]
                },
                {
                    "id": 16,
                    "name": "btn1",                
                    "events": [
                        {
                            "event": "toggle",
                            "actions": [
                                {
                                    "output": 1,
                                    "action": "toggle",
                                    "slaveId": 2
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    }

}


"modbus": {
            "mode": "slave",
            "slaveId": 1,
            "master": "12345678"            
        },


{"type": "DEVICECONFIG",
    "payload": {
        "name": "slave",
        "model": "RCV2S",
        "mac": "N222333",
        "description": "test slave",
        "modbus": {
            "mode": "slave",
            "slaveId": 2,
            "master": "N12345678"
        },
        "network": {
            "eth": {
                "dhcp": true
            },
            "wifi": {
                "dhcp": true
            },
            "ntpserver": "test"
        },
        "io": {
            "outputs": [
                {
                    "id": 1,
                    "name": "out1",
                    "state": "on"
                },
                {
                    "id": 2,
                    "name": "out2",
                    "state": "on",
                    "type": "INVSW"
                }
            ],
            "inputs": [
                {
                    "id": 1,
                    "name": "in1",
                    "state": "on",
                    "events": [
                        {
                            "event": "toggle",
                            "actions": [
                                {
                                    "output": 1,
                                    "action": "toggle"
                                }
                            ]
                        }
                    ]
                },
                {
                    "id": 2,
                    "name": "in2",
                    "state": "off",
                    "events": [
                        {
                            "event": "on",
                            "actions": [
                                {
                                    "output": 1,
                                    "action": "off",
                                    "slaveId": 2
                                }
                            ]
                        }
                    ]
                },
                {
                    "id": 17,
                    "name": "btn1",                
                    "events": [
                        {
                            "event": "toggle",
                            "actions": [
                                {
                                    "output": 1,
                                    "action": "toggle"
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    }

}

{"type": "IOSTATES",
    "payload": {
        "outputs": [
            {
                "id": 1,
                "state": "new1"
            },
            {
                "id": 2,
                "state": "new2",
                "slaveId": 1
            }
        ],
        "inputs": [
            {
                "id": 2,
                "state": "new3"
            }
        ]    
    }
}
